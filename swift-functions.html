<!DOCTYPE html>
<html lang="en">
<head>
        <title>Alex's Blog : Swift Functions</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="https://alexshepard.github.io/theme/css/main.css" type="text/css" />
        <link href="https://alexshepard.github.io/None" type="application/atom+xml" rel="alternate" title="Alex's Blog ATOM Feed" />

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="https://alexshepard.github.io/css/ie.css"/>
                <script src="https://alexshepard.github.io/js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="https://alexshepard.github.io/css/ie6.css"/><![endif]-->

</head>

<body>
        
<header>
    <h1><a href="https://alexshepard.github.io" id="site-title">Alex's Blog </a> :
        <a href="https://alexshepard.github.io/swift-functions.html" id="page-title">Swift Functions</a></h1>
<time datetime="2020-02-13T08:13:57-08:00">Thu 13 February 2020</time></header>
<article>
    <p>Onward to day 5 of <a href="https://www.hackingwithswift.com/100">100 Days of Swift</a>. Today was all about functions, and there were a few things that I didn't remember, mainly because I don't use them much when I code.</p>
<p>First up is variadic functions. I don't use these because I tend to use arrays when I need to pass in an arbitrary number of values of the same type. Because <a href="https://bugs.swift.org/browse/SR-128">swift doesn't support splatting</a>, you have to do this either as an array or with a variadic function, there's no way to safely do both at the same time without helper functions.</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span> <span class="nf">todayISaw</span><span class="p">(</span><span class="kc">_</span> <span class="n">taxa</span><span class="p">:</span> <span class="nb">String</span><span class="p">...)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="n">taxa</span><span class="p">.</span><span class="bp">contains</span><span class="p">(</span><span class="s">&quot;California Slender Salamander&quot;</span><span class="p">)</span> <span class="p">{</span>
        <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Today was a good day!&quot;</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Better luck tomorrow.&quot;</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>Another thing I've mostly forgotten about with Swift is function parameter default values. I use this feature a lot in python to provide sensible defaults for training parameters, like the number of epochs to run or the number of validation batches per validation pass.</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span> <span class="nf">hike</span><span class="p">(</span><span class="n">whileMakingObservations</span><span class="p">:</span> <span class="nb">Bool</span> <span class="p">=</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="n">whileMakingObservations</span> <span class="p">{</span>
        <span class="bp">print</span><span class="p">(</span><span class="s">&quot;What a lovely day!&quot;</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Why not?&quot;</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>I also forgot about <code>inout</code> parameters, I guess it's a feature that I don't really use and that I tend to code around. I think the main place I see it in Objective-C is with error handling. While the tutorials all use <code>inout</code> to modify primitive values, that seems like a contrived example to me. Passing by reference, however, could be useful:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span> <span class="nf">makeObservation</span><span class="p">(</span><span class="n">taxon</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span> <span class="n">lifeList</span><span class="p">:</span> <span class="kr">inout</span> <span class="n">Set</span><span class="p">&lt;</span><span class="nb">String</span><span class="p">&gt;)</span> <span class="p">{</span>
    <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Nice </span><span class="si">\(</span><span class="n">taxon</span><span class="si">)</span><span class="s"> sighting!&quot;</span><span class="p">)</span>
    <span class="n">lifeList</span><span class="p">.</span><span class="bp">insert</span><span class="p">(</span><span class="n">taxon</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nv">lifeList</span> <span class="p">=</span> <span class="n">Set</span><span class="p">&lt;</span><span class="nb">String</span><span class="p">&gt;()</span>
<span class="n">makeObservation</span><span class="p">(</span><span class="n">taxon</span><span class="p">:</span> <span class="s">&quot;Toyon&quot;</span><span class="p">,</span> <span class="n">lifeList</span><span class="p">:</span> <span class="p">&amp;</span><span class="n">lifeList</span><span class="p">)</span>
<span class="n">makeObservation</span><span class="p">(</span><span class="n">taxon</span><span class="p">:</span> <span class="s">&quot;California Poppy&quot;</span><span class="p">,</span> <span class="n">lifeList</span><span class="p">:</span> <span class="p">&amp;</span><span class="n">lifeList</span><span class="p">)</span>
</code></pre></div>

<p>And one last thing that I didn't remember: using multiple catch blocks to handle different kinds of errors.</p>
<div class="highlight"><pre><span></span><code><span class="kd">enum</span> <span class="nc">ObservationError</span><span class="p">:</span> <span class="n">Error</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">NoTaxon</span>
    <span class="k">case</span> <span class="n">NoDate</span>
    <span class="k">case</span> <span class="n">NoGPS</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">makeObservationFromDict</span><span class="p">(</span><span class="kc">_</span> <span class="n">dict</span><span class="p">:</span> <span class="nb">Dictionary</span><span class="p">&lt;</span><span class="nb">String</span><span class="p">,</span> <span class="nb">Any</span><span class="p">&gt;)</span> <span class="kr">throws</span> <span class="p">{</span>
    <span class="k">guard</span> <span class="n">dict</span><span class="p">[</span><span class="s">&quot;taxon&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="k">else</span> <span class="p">{</span> <span class="k">throw</span> <span class="n">ObservationError</span><span class="p">.</span><span class="n">NoTaxon</span> <span class="p">}</span>
    <span class="k">guard</span> <span class="n">dict</span><span class="p">[</span><span class="s">&quot;date&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">nil</span>  <span class="k">else</span> <span class="p">{</span> <span class="k">throw</span> <span class="n">ObservationError</span><span class="p">.</span><span class="n">NoDate</span> <span class="p">}</span>
    <span class="k">guard</span> <span class="n">dict</span><span class="p">[</span><span class="s">&quot;gps&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">nil</span>   <span class="k">else</span> <span class="p">{</span> <span class="k">throw</span> <span class="n">ObservationError</span><span class="p">.</span><span class="n">NoGPS</span> <span class="p">}</span>

    <span class="c1">// make observation...</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nv">obsDict</span><span class="p">:</span> <span class="p">[</span><span class="nb">String</span><span class="p">:</span> <span class="nb">Any</span><span class="p">]</span> <span class="p">=</span> <span class="p">[</span><span class="s">&quot;taxon&quot;</span><span class="p">:</span> <span class="s">&quot;Genus Scaphinotus&quot;</span><span class="p">,</span> <span class="s">&quot;date&quot;</span><span class="p">:</span> <span class="n">Date</span><span class="p">()]</span>
<span class="k">do</span> <span class="p">{</span>
    <span class="k">try</span> <span class="n">makeObservationFromDict</span><span class="p">(</span><span class="n">obsDict</span><span class="p">)</span>
<span class="p">}</span> <span class="k">catch</span> <span class="n">ObservationError</span><span class="p">.</span><span class="n">NoTaxon</span> <span class="p">{</span>
    <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Please tell us what you saw.&quot;</span><span class="p">)</span>
<span class="p">}</span> <span class="k">catch</span> <span class="n">ObservationError</span><span class="p">.</span><span class="n">NoDate</span> <span class="p">{</span>
    <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Please tell us when you saw it.&quot;</span><span class="p">)</span>
<span class="p">}</span> <span class="k">catch</span> <span class="n">ObservationError</span><span class="p">.</span><span class="n">NoGPS</span> <span class="p">{</span>
    <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Please tell us where you saw it.&quot;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>

<p>Today's annoyance: the iPad Playgrounds Swift runtime crashed when I was 90% done with the day's lesson. I had to reset (in app, I never closed the Playgrounds app), and it deleted the entire page of code. I'm now looking very suspiciously at this text/code editor which can delete my work without warning.</p>
</article>

        <footer>
            <nav>
                <ul>
                    <li>:: <a href="https://alexshepard.github.io/categories.html">Categories</a></li>
                    <li>:: <a href="https://alexshepard.github.io/tags.html">Tags</a></li>
                </ul>
            </nav>
                <p id="theme-credit"><a href="http://mathieu.agopian.info/mnmlist/theme.html">Thème mnmlist</a></p>
        </footer>

</body>
</html>