
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="index, follow" />

  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="/theme/stylesheet/style.min.css">


    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
          href="/theme/pygments/github.min.css">



  <link rel="stylesheet" type="text/css" href="/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="/theme/font-awesome/css/solid.css">



  <!-- Chrome, Firefox OS and Opera -->
  <meta name="theme-color" content="#333">
  <!-- Windows Phone -->
  <meta name="msapplication-navbutton-color" content="#333">
  <!-- iOS Safari -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <!-- Microsoft EDGE -->
  <meta name="msapplication-TileColor" content="#333">




 

<meta name="author" content="alex" />
<meta name="description" content="Another day of 100 Days of Swift, with more closure confusion this time. Closure syntax is complicated on its own, without even considering all of the shorthand and optional syntactic structures, from trailing closure syntax. The confusion is compounded by the way that the Xcode editor will suggest some shorthand …" />
<meta name="keywords" content="swift">


  <meta property="og:site_name" content="Alex's Blog"/>
  <meta property="og:title" content="Closures, part 2"/>
  <meta property="og:description" content="Another day of 100 Days of Swift, with more closure confusion this time. Closure syntax is complicated on its own, without even considering all of the shorthand and optional syntactic structures, from trailing closure syntax. The confusion is compounded by the way that the Xcode editor will suggest some shorthand …"/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:url" content="/closures-part-2.html"/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content="2020-02-15 17:14:15-08:00"/>
  <meta property="article:modified_time" content=""/>
  <meta property="article:author" content="/author/alex.html">
  <meta property="article:section" content="swift"/>
  <meta property="article:tag" content="swift"/>
  <meta property="og:image" content="/images/alex_pixel_avatar.jpg">

  <title>Alex's Blog &ndash; Closures, part 2</title>


</head>
<body class="light-theme">

<aside>
  <div>
    <a href="/">
      <img src="/images/alex_pixel_avatar.jpg" alt="Alex" title="Alex">
    </a>

    <h1>
      <a href="/">Alex</a>
    </h1>

    <p>Machine Learning, Art, and other stuff</p>


    <nav>
      <ul class="list">



          <li>
            <a target="_self" href="https://www.inaturalist.org/users/alexshepard" >inat</a>
          </li>
      </ul>
    </nav>

    <ul class="social">
      <li>
        <a class="sc-github"
           href="https://github.com/alexshepard/"
           target="_blank">
          <i class="fa-brands fa-github"></i>
        </a>
      </li>
    </ul>
  </div>

</aside>
  <main>

<nav>
  <a href="/">Home</a>

  <a href="/archives.html">Archives</a>
  <a href="/categories.html">Categories</a>
  <a href="/tags.html">Tags</a>


</nav>

<article class="single">
  <header>
      
    <h1 id="closures-part-2">Closures, part 2</h1>
    <p>
      Posted on Sat 15 February 2020 in <a href="/category/swift.html">swift</a>

    </p>
  </header>


  <div>
    <p>Another day of <a href="https://www.hackingwithswift.com/100">100 Days of Swift</a>, with more closure confusion this time. Closure syntax is complicated on its own, without even considering all of the shorthand and optional syntactic structures, from trailing closure syntax. The confusion is compounded by the way that the Xcode editor will suggest some shorthand but not others.</p>
<p>This example is stupid and contrived, but whatever.</p>
<p>Given these functions:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span> <span class="nf">cgContextWatermark</span><span class="p">(</span><span class="n">image</span><span class="p">:</span> <span class="bp">UIImage</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">String</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="bp">UIImage</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nv">cgImage</span> <span class="p">=</span> <span class="n">image</span><span class="p">.</span><span class="n">cgImage</span>
    <span class="c1">// .. do the watermarking and return it</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">watermark</span><span class="p">(</span><span class="n">image</span><span class="p">:</span> <span class="bp">UIImage</span><span class="p">,</span> <span class="n">using</span> <span class="n">algo</span><span class="p">:</span> <span class="p">(</span><span class="nb">String</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="bp">UIImage</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nv">result</span> <span class="p">=</span> <span class="n">algo</span><span class="p">(</span><span class="s">&quot;Alex&#39;s Photo&quot;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>

<p>These are all valid calling syntaxes. Is there one which is more idiomatic or natural to Swift developers?</p>
<div class="highlight"><pre><span></span><code><span class="n">watermark</span><span class="p">(</span><span class="n">image</span><span class="p">:</span> <span class="n">myPhoto</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">watermarkText</span><span class="p">:</span> <span class="nb">String</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="bp">UIImage</span> <span class="k">in</span>
    <span class="k">return</span> <span class="n">cgContextWatermark</span><span class="p">(</span><span class="n">image</span><span class="p">:</span> <span class="n">myPhoto</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="n">watermarkText</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">watermark</span><span class="p">(</span><span class="n">image</span><span class="p">:</span> <span class="n">myPhoto</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">watermarkText</span><span class="p">:</span> <span class="nb">String</span><span class="p">)</span> <span class="k">in</span> 
    <span class="k">return</span> <span class="n">cgContextWatermark</span><span class="p">(</span><span class="n">image</span><span class="p">:</span> <span class="n">myPhoto</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="n">watermarkText</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">watermark</span><span class="p">(</span><span class="n">image</span><span class="p">:</span> <span class="n">myPhoto</span><span class="p">)</span> <span class="p">{</span> <span class="n">watermarkText</span> <span class="k">in</span> 
    <span class="k">return</span> <span class="n">cgContextWatermark</span><span class="p">(</span><span class="n">image</span><span class="p">:</span> <span class="n">myPhoto</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="n">watermarkText</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">watermark</span><span class="p">(</span><span class="n">image</span><span class="p">:</span> <span class="n">myPhoto</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">cgContextWatermark</span><span class="p">(</span><span class="n">image</span><span class="p">:</span> <span class="n">myPhoto</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nv">$0</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">watermark</span><span class="p">(</span><span class="n">image</span><span class="p">:</span> <span class="n">myPhoto</span><span class="p">)</span> <span class="p">{</span> <span class="n">cgContextWatermark</span><span class="p">(</span><span class="n">image</span><span class="p">:</span> <span class="n">myPhoto</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nv">$0</span><span class="p">)</span> <span class="p">}</span>
</code></pre></div>

<p>Who knew that syntaxes was the plural of syntax? Not this guy.</p>
<p>Also, you can return a closure from a function, which is pretty nifty:</p>
<div class="highlight"><pre><span></span><code><span class="kd">enum</span> <span class="nc">IdentificationTechnique</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">ComputerVision</span>
    <span class="k">case</span> <span class="n">Jepson</span>
    <span class="k">case</span> <span class="n">Intuition</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">createIdentifier</span><span class="p">(</span><span class="n">using</span> <span class="n">technique</span><span class="p">:</span> <span class="n">IdentificationTechnique</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="p">(</span><span class="bp">UIImage</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">String</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span> <span class="kc">_</span> <span class="k">in</span> 
        <span class="k">switch</span> <span class="n">technique</span> <span class="p">{</span>
        <span class="k">case</span> <span class="p">.</span><span class="n">ComputerVision</span><span class="p">:</span> 
            <span class="k">return</span> <span class="s">&quot;It&#39;s probably a Western Honey Bee.&quot;</span>
        <span class="k">case</span> <span class="p">.</span><span class="n">Jepson</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">&quot;Let&#39;s key it out.&quot;</span>
        <span class="k">case</span> <span class="p">.</span><span class="n">Intuition</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">&quot;Definitely a California Slender Salamander.&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="nv">identifier</span> <span class="p">=</span> <span class="n">createIdentifier</span><span class="p">(</span><span class="n">using</span><span class="p">:</span> <span class="p">.</span><span class="n">ComputerVision</span><span class="p">)</span>
<span class="kd">let</span> <span class="nv">photo</span> <span class="p">=</span> <span class="p">...</span>
<span class="bp">print</span><span class="p">(</span><span class="n">identifier</span><span class="p">(</span><span class="n">photo</span><span class="p">))</span>
</code></pre></div>

<p>Finally, my daily annoyance. All the bloggers are whining about iPadOS needing an update, and I've mostly been ignoring it. The YouTuber/blogger echo chamber among the Mac/iOS technorati generates mostly garbage; I don't care about external USB access on my iPad, and I don't care if anyone agrees with me there. However, there are a few things that are annoying about split view. The safe area isn't correctly calculated by Playgrounds when in split view, and I've seen this in other apps, so I think it's not just a playgrounds problem. Also, how do I know which view has keyboard focus? When I tap <code>CMD-w</code> on my keyboard, will my playground page or the active safari tab be closed?</p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="/tag/swift.html">swift</a>
    </p>
  </div>






</article>

<footer>
<p>&copy; 2024 </p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
</p></footer>  </main>

<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Alex's Blog ",
  "url" : "",
  "image": "/images/alex_pixel_avatar.jpg",
  "description": ""
}
</script>
</body>
</html>